{% macro imageById(id, attachments) %}
{% for a in attachments %}
{% if a.wp_id == id %}
{% set urlEl = a.url.split('/') %}
/images/migration/{{ urlEl[urlEl.length - 1] }}
{% endif %}
{% endfor %}
{% endmacro %}

{#
{% macro projectTeaser(p, locale, attachments) %}
<li>
  <a href="/{{locale}}/projects/{{p.slug}}/" title="{{p.title}}">
    <img src="{{imageById(p.thumbnail_id, attachments)}}" alt="" loading="lazy" />
  </a>
  <a href="/{{locale}}/projects/{{p.slug}}/" title="{{p.title}}">
    <h2><span>{{p.name[locale]}}</span></h2>
    <span class="subtitle">{{p.subtitle[locale]}}</span>
  </a>
</li>
{% endmacro %}
#}


{% macro projectTeaser(p, locale, attachments) %}

<a href="/{{locale}}/projects/{{p.slug}}/" title="{{p.name[locale]}}" class="project-container {% for item in p.filter_themen %}{{item | slug }} {% endfor %} {% for item in p.filter_services %}{{item | slug }} {% endfor %} {% for item in p.filter_art %}{{item | slug }} {% endfor %} ">

		<div class="project-image">
      
			<img src="{{imageById(p.thumbnail_id, attachments)}}" alt="{{p.name[locale]}}" loading="lazy">
		</div>

		<div class="project-desc-container">

			<div class="project-name">
				<span>{{p.name[locale]}}</span> {{p.subtitle[locale]}}
			</div>

			<div class="project-sponsor">
				<img src="{{p.project_funding_logo}}" alt="{{p.project_funding_name}}">
			</div>

			<div class="project-tags-container">
        {% for item in p.filter_themen %}
        <div class="project-tag">{{item}}</div>
        {% endfor %}
        {% for item in p.filter_services %}
        <div class="project-tag">{{item}}</div>
        {% endfor %}
        {% for item in p.filter_art %}
        <div class="project-tag">{{item}}</div>
        {% endfor %}

			</div>

		</div>

	</a>	
  {% endmacro %}

{% macro peopleTeaser(p, locale) %}
<li>
  <a href="/{{locale}}/people/{{p.slug}}/" title="{{p.name[locale]}}">
    {{p.name[locale]}}
  </a>
</li>
{% endmacro %}

{% macro publicationTeaser(p, locale, people) %}
 
<div class="pub-container">
  
  {% if lastyear != p.data.year %}
			<div class="year" id="{{p.data.year}}">{{p.data.year}}</div>
		{% set lastyear = p.data.year %}
    {% endif %}
 
		<h4>{{p.data.title}}</h4>
		<div class="pub-authors">
			<ul>
         {% for a in p.data.authors %}
         {{a | dumper}}
				<li> {% if a.internal_author_de %}
          {% if locale == 'de' %}
          {% set author = a.internal_author_de %}
          {% else %}
          {% set author = a.internal_author_en %}
          {% endif %}
          <a href="{{author.url}}">{{author.name}}</a>
          {% else %}
          {% if a.url %}
          <a href="{{a.url}}">
          {% endif %}
          {{a.name}}
          {% if a.url %}
          </a>
          {% endif %}
          {% endif %}
    </li>
    {% endfor %}
			
			</ul>
		</div>

		<div class="pub-desc">
			{{p.data.outlet}}
		</div>
    
    {% if p.data.website %}
		<div class="download-link">
			<a href="{{p.data.website}}">DOWNLOAD PDF</a>
		</div>
    {% endif %}
    
	</div>
{% endmacro %}

{#
{% macro publicationTeaser(p, locale, people) %}
<li>
  <h4>{{p.title[locale]}}</h4>
  <div class="publication-meta">
    <ul>
    {% for a in p.authors_names %}
    <li>
    {% if p.authors_ids[loop.index0] != "null" %}
    <a href="/people/{{peopleById(p.authors_ids[loop.index0], people)}}">{{a}}</a>
    {% else %}
    {{a}}
    {% endif %}
    </li>
    {% endfor %}
    </ul>
    <span>{{p.year}}</span>
    <span>{{p.outlet}}</span>
  </div>
</li>
{% endmacro %}
#}

{% macro peopleById(id, people) %}
{% for p in people %}
{% if p.wp_id == id %}
{{ p.slug }}
{% endif %}
{% endfor %}
{% endmacro %}