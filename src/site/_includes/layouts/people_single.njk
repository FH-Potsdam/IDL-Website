{% include 'header.njk' %}
{% from './macros.njk' import publicationTeaser, imageById, projectTeaser %}

<div class="content-container">
<div class="person">
      {% if person.image_link %}
			<img src="{{(person.image_link)}}" alt="" loading="lazy" />
      {% endif %}
      
      <div class="person-facts">
        <div class="title">
        {% if 'Prof.' in person.name[locale] %} Prof. {% endif %}
        {% if 'Dr.' in person.name[locale] %} Dr. {% endif %}
        </div>
        <h1>{{person.name[locale] | replace ("Prof.", "") | replace ("Dr.", "")}}</h1> 

        <div class="position">{% if person.subtitle[locale] %}{{person.subtitle[locale]}}{% endif %}</div>

        <div class="output-container">

          
          {% set projectcounter = 0 %}
          {% for p in projects | sort(true, false, "year") %}
          {% if person.wp_id in p.project_team %}
          {% set projectcounter = projectcounter + 1 %}
          {% endif %}
          {% endfor %}

          {% set publicationcounter = 0 %}
          {% for p in publications | sort(true, false, "year") %}
          {% if person.wp_id in p.authors_ids %}
          {% set publicationcounter = publicationcounter + 1 %}
          {% endif %}
          {% endfor %}

          {% if projectcounter > 3 %}
          <div class="person-projects"><a href="#projects">Projekte</a> ({{ projectcounter }})</div>
          {% endif %}

          {% if publicationcounter > 3 %}
          <div class="person-publications"><a href="#publications">Publikationen</a> ({{person.publications | length}})</div>
          {% endif %}
        </div>

        <div class="person-contacts">
            {% if person.email %} 
            <div class="email">E-Mail <a href="mailto:{{ person.email }}">{{ person.email }}</a></div>
            {% endif %}
            {% if person.website %} 
            <div class="website">Website <a href="{{ person.website }}">{{ person.website }}</a></div>
            {% endif %}
            {% if person.twitter %} 
            <div class="twitter">Twitter <a href="https://twitter.com/{{ person.twitter }}">{{ person.twitter }}</a></div>
            {% endif %}
        
        </div>

      </div>

</div>

      <div class="person-excerpt">
{% if person.page[locale] %}
<p>{{person.page[locale] | safe}}</p>
{% endif %}
      </div>

{% if person.laufschrift_tags %}
<div class="laufschrift-container">

	<div class="scroll1">Interaction × Design × Lab × Interaction × Design × Lab × Interaction × Design × Lab × </div>
	<div class="scroll2">{{person.laufschrift_tags}}</div>

</div>
{% endif %}
</div>
{# {{project.page[locale] | safe}} #}

{% if projectcounter > 0 %}
<h2 class="projects" id="projects">Projects</h2>
<div class="projects expand-projects preview">
{% for p in projects | sort(true, false, "year") %}
{% if person.wp_id in p.project_team %}
{{ projectTeaser(p, locale, attachments) }}
{% endif %}
{% endfor %}
</div>
    {% if projectcounter > 3 %}
    <div class="more-link">
        {% set lang = page.url.slice(1, 3) %}
        <button class="button" id="button-projects" type="button">{% if lang == 'en' %}Show {{ projectcounter }} all projects{% else %}Alle {{ projectcounter }} Projekte anzeigen{% endif %}</button>
      
      </div>
      {% endif %}
{% endif %}



{% if publicationcounter > 0 %}
  {% set lastyear = '0' %}

<div class="publications expand-pubs preview">
  <h2 id="publications">Publications</h2>
{% for p in publications | sort(true, false, "year") %}
{% if person.wp_id in p.authors_ids %}

    

{{ publicationTeaser(p, locale, people, attachments) }}
{% endif %}
{% endfor %}
</div>
  {% if publicationcounter > 3 %}
  <div class="more-link">
      {% set lang = page.url.slice(1, 3) %}
    <a class="button" id="button-pubs">{% if lang == 'en' %}Show {{ publicationcounter }} all publications{% else %}Alle {{ publicationcounter }} Publikationen anzeigen{% endif %}</a>
    </div>
  {% endif %}
{% endif %}



{% include 'footer.njk' %}